<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Chủ</title>
    <link rel="stylesheet" href="../../public/css/home.css">
    <link rel="stylesheet" href="../../public/css/header.css">
    <link rel="stylesheet" href="../../public/css/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
</head>
<body>
{{> header}}

<div class="container mx-auto px-4 py-8">
    <!-- Bài viết nổi bật -->
    <section class="mb-8">
        <h2 class="text-2xl font-bold mb-4">Bài Viết Nổi Bật</h2>
        <div class="bg-white rounded-lg shadow p-4 flex">
            <img src="https://via.placeholder.com/150" alt="Hình minh họa" class="w-48 h-32 object-cover rounded mr-4">
            <div>
                <h3 class="font-semibold">Title</h3>
                <p class="text-gray-700 mb-2">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla quam velit, vulputate eu pharetra nec, mattis ac neque. Duis vulputate commodo lectus, ac blandit elit tincidunt id.</p>
                <span class="text-gray-500 text-sm">Many hours ago</span>
            </div>
        </div>
    </section>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Bài viết mới nhất -->
        <section>
            <h2 class="text-xl font-bold mb-4">Bài Viết Mới Nhất</h2>
            <div class="bg-white rounded-lg shadow p-4 mb-4">
                <h3 class="font-semibold">Title</h3>
                <img src="https://via.placeholder.com/150" alt="Hình minh họa" class="w-full h-32 object-cover rounded mb-2">
                <span class="text-gray-500 text-sm">Many hours ago</span>
            </div>
            <div class="bg-white rounded-lg shadow p-4 mb-4">
                <h3 class="font-semibold">Title</h3>
                <img src="https://via.placeholder.com/150" alt="Hình minh họa" class="w-full h-32 object-cover rounded mb-2">
                <span class="text-gray-500 text-sm">Many hours ago</span>
            </div>
        </section>

        <!-- Bài viết xem nhiều nhất -->
        <section>
            <h2 class="text-xl font-bold mb-4">Bài Viết Xem Nhiều Nhất</h2>
            <div class="bg-white rounded-lg shadow p-4 mb-4">
                <h3 class="font-semibold">Title</h3>
                <img src="https://via.placeholder.com/150" alt="Hình minh họa" class="w-full h-32 object-cover rounded mb-2">
                <span class="text-gray-500 text-sm">Many hours ago</span>
                <p class="text-gray-700">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla quam velit, vulputate eu pharetra nec, mattis ac neque.</p>
            </div>
            <div class="bg-white rounded-lg shadow p-4 mb-4">
                <h3 class="font-semibold">Title</h3>
                <img src="https://via.placeholder.com/150" alt="Hình minh họa" class="w-full h-32 object-cover rounded mb-2">
                <span class="text-gray-500 text-sm">Many hours ago</span>
            </div>
        </section>
    </div>
</div>


{{> footer}}

<script>
    async function fetchArticles() {
        try {
            const response = await fetch('http://localhost:8080/guest/home');
            const data = await response.json();
            displayArticles(data);
        } catch (error) {
            console.error('Error fetching articles:', error);
        }
    }

    function displayArticles(data) {
        const { topArticles, mostViewedArticles, latestArticles } = data;

        const topArticlesList = document.getElementById('top-articles');
        if (topArticlesList) {
            topArticles.forEach(article => {
                const articleItem = document.createElement('div');
                articleItem.classList.add('article');
                articleItem.innerHTML = `
                        <img src="${article.image}" alt="${article.title}" class="w-full h-32 object-cover rounded mb-2">
                        <h3>${article.title}</h3>
                        <p>${article.summary}</p>
                        <a href="/guest/article/${article._id}" class="text-blue-600 hover:text-blue-800">Đọc thêm</a>
                    `;
                topArticlesList.appendChild(articleItem);
            });
        }

        const mostViewedArticlesList = document.getElementById('most-viewed-articles');
        if (mostViewedArticlesList) {
            mostViewedArticles.forEach(article => {
                const articleItem = document.createElement('div');
                articleItem.classList.add('article');
                articleItem.innerHTML = `
                        <img src="${article.image}" alt="${article.title}" class="w-full h-32 object-cover rounded mb-2">
                        <h3>${article.title}</h3>
                        <p>${article.summary}</p>
                        <a href="/guest/article/${article._id}" class="text-blue-600 hover:text-blue-800">Đọc thêm</a>
                    `;
                mostViewedArticlesList.appendChild(articleItem);
            });
        }

        const latestArticlesList = document.getElementById('latest-articles');
        latestArticles.forEach(article => {
            const articleItem = document.createElement('div');
            articleItem.classList.add('article');
            articleItem.innerHTML = `
                    <img src="${article.image}" alt="${article.title}" class="w-full h-32 object-cover rounded mb-2">
                    <h3>${article.title}</h3>
                    <p>${article.summary}</p>
                    <a href="/guest/article/${article._id}" class="text-blue-600 hover:text-blue-800">Đọc thêm</a>
                `;
            latestArticlesList.appendChild(articleItem);
        });
    }

    document.addEventListener('DOMContentLoaded', fetchArticles);
</script>
</body>
</html>